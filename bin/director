#!/usr/bin/env python

import fusegui
import fusegui.dbusserver
import gobject
from dbus.mainloop.glib import DBusGMainLoop

class Director(object):
	dbus_objects = {}

	def run(self):
		config = fusegui.Config()
		for site in config.sites:
			self.dbus_objects[site.name] = fusegui.dbusserver.Site(site)

def main():
	DBusGMainLoop(set_as_default=True)
	d = Director()
	d.run()

	loop = gobject.MainLoop()
	loop.run()

if __name__ == '__main__':
    main()